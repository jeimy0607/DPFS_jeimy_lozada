<!DOCTYPE html>
<html lang="es">

  <head>
    <% include ./partials/head %>

  </head>

<body>

   <!-- incluir codigo parcial de otro archivo -->
    <%- include('./partials/header') %>




  <div class="registro-caja">

 
  
    <h1>Crear cuenta</h1>

    <% if (error) { %>
  <p class="error-msg"><%= error %></p>
<% } %>

    <% if (typeof error !== "undefined" && error) { %>
  <p style="color:#b91c1c; font-weight:700;"><%= error %></p>
<% } %>

    <form class="form-registro" action="/registro" method="POST" enctype="multipart/form-data">

      <div class="campo">
        <label for="name">Nombre</label>
        <input
          type="text"
          id="name"
          name="name"
          required
        />
      </div>

      <div class="campo">
        <label for="lastname">Apellido</label>
        <input
          type="text"
          id="lastname"
          name="lastname"
          required
        />
      </div>

      <div class="campo">
        <label for="dni">Cédula</label>
        <input type="text" id="dni" name="dni" required />
      </div>

      <div class="campo">
        <label for="email">Correo electrónico</label>
        <input
          type="email"
          id="email"
          name="email"
          required
        />
      </div>

      <div class="campo">
  <label for="rol">Rol</label>
  <select id="rol" name="rol" required>
    <option value="comprador">Comprador</option>
    <option value="admin">Administrador</option>
  </select>
</div>


      <div class="campo">
        <label for="password">Contraseña</label>
        <input
  type="password"
  id="password"
  name="password"
  minlength="8"
  pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$"
  title="Debe tener mínimo 8 caracteres e incluir letras y números."
  required
/>
      </div>

      <div class="campo">
        <label for="password2">Confirmar contraseña</label>
        <input
  type="password"
  id="password2"
  name="password2"
  minlength="8"
  required
/>

      </div>

      <div class="campo">
  <label for="foto">Foto de perfil</label>
  <input type="file" id="foto" name="foto" accept="image/*" />
</div>



      <div class="items-registro">
        <input type="checkbox" id="terms" name="terms" required />
        <label for="terms">Acepto los términos y condiciones</label>
      </div>

      <div class="acciones">
        <button type="submit">Crear Cuenta</button>

        <p>¿Ya tienes cuenta?
          <a href="/login" role="button">Iniciar sesión</a>
        </p>

      </div>
    </form>

    
  
 </div>






  <%- include('./partials/footer') %> 



  <script>
  const p1 = document.getElementById("password");
  const p2 = document.getElementById("password2");

  function checkMatch(){
    if (!p2.value) { p2.setCustomValidity(""); return; }
    if (p1.value !== p2.value) {
      p2.setCustomValidity("Las contraseñas no coinciden");
    } else {
      p2.setCustomValidity("");
    }
  }

  p1.addEventListener("input", checkMatch);
  p2.addEventListener("input", checkMatch);
</script>

</body>
</html>
